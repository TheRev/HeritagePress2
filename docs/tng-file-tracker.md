# TNG File Tracker - HeritagePress Conversion

## Overview

This document tracks the conversion process from TNG (The Next Generation) genealogy software to HeritagePress WordPress plugin. It documents which TNG files have been converted, adapted, or replaced.

## Database Schema Conversion

### TNG Tables → HeritagePress Tables

| TNG File Name            | Refactored                                         | WordPress File Created                                                              | Notes                                                                                                                                                                                                                                  | Last Updated |
| ------------------------ | -------------------------------------------------- | ----------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ |
| admin_addassoc.php       | ✅                                                 | Already implemented                                                                 | Full association functionality exists in HP_Association_Manager, AJAX handlers, and admin interface                                                                                                                                    | 2025-06-18   |
| admin_addbranch.php      | ✅                                                 | Already implemented                                                                 | Full branch management exists in HP_Branch_Manager, admin interface with CRUD operations, much more comprehensive than TNG                                                                                                             | 2025-06-18   |
| admin_branchlabels.php   | ✅                                                 | class-hp-branch-controller.php, branches-main.php                                   | Complete branch labeling system with UI tab, AJAX processing, ancestor/descendant traversal, and all TNG labeling functionality                                                                                                        | 2025-06-18   |
| admin_branchoptions.php  | ✅                                                 | class-hp-branch-controller.php, ajax_get_branch_options method                      | AJAX endpoint for HTML branch options dropdown population, replicates TNG functionality exactly with WordPress security                                                                                                                | 2025-06-18   |
| admin_add_dna_group.php  | ✅                                                 | class-hp-dna-controller.php, dna-groups.php, dna-groups-edit.php                    | Complete DNA group management system with tabbed interface, CRUD operations, search, validation, and WordPress admin integration                                                                                                       | 2025-06-18   |
| admin_add_dna_test.php   | ✅                                                 | class-hp-dna-controller.php, dna-tests.php, dna-tests-form.php                      | Complete DNA test management system with tabbed interface, CRUD operations, search, validation, and WordPress admin integration                                                                                                        | 2025-06-18   |
| admin_addcemetery.php    | ✅                                                 | class-hp-cemetery-controller.php, cemeteries-add.php                                | Complete cemetery add handler with file upload, geocoding, place linking, and WordPress security                                                                                                                                       | 2025-06-18   |
| admin_cemeteries.php     | ✅                                                 | class-hp-cemetery-controller.php, cemeteries-main.php                               | Complete cemetery management system with search, pagination, bulk operations, map integration, and all TNG functionality fully replicated                                                                                              | 2025-06-18   |
| admin_newcemetery.php    | ✅                                                 | class-hp-cemetery-controller.php, cemeteries-add.php                                | Complete cemetery add form with all TNG fields, file upload, state/country dropdowns, map integration, and WordPress admin UI                                                                                                          | 2025-06-18   |
| admin_editcemetery.php   | ✅                                                 | class-hp-cemetery-controller.php, cemeteries-edit.php                               | Complete cemetery edit form with all TNG fields, file upload, coordinate editing, and WordPress admin integration                                                                                                                      | 2025-06-18   |
| admin_updatecemetery.php | ✅                                                 | class-hp-cemetery-controller.php                                                    | Cemetery update handler integrated into controller with file upload, geocoding, place linking, and WordPress security                                                                                                                  | 2025-06-18   |
| admin_addcitation.php    | ✅                                                 | class-hp-citation-controller.php, citations-\*.php                                  | Complete citation management system with CRUD operations, AJAX handlers, source search, and WordPress admin integration                                                                                                                | 2025-01-26   |
| admin_citations.php      | ✅                                                 | class-hp-citation-controller.php, citations-modal.php, citation-modal.js/css        | AJAX modal interface exactly replicating TNG admin_citations.php popup with all functionality: citation listing, add/edit forms, source search, order management, session copy                                                         | 2025-06-18   |
| admin_editcitation.php   | ✅                                                 | class-hp-citation-controller.php, citations-edit.php                                | Citation editing interface with source finder, validation, and AJAX form submission                                                                                                                                                    | 2025-01-26   |
| admin_updatecitation.php | ✅                                                 | class-hp-citation-controller.php                                                    | Citation update logic integrated into controller with proper WordPress security and validation                                                                                                                                         | 2025-01-26   |
| admin_deletecitation.php | ✅                                                 | class-hp-citation-controller.php                                                    | Citation deletion logic integrated into controller with AJAX support and proper WordPress security                                                                                                                                     | 2025-01-26   |
| admin_addcollection.php  | ✅                                                 | class-hp-media-collection-controller.php, media-collections.php                     | Complete media collection/media type management system with CRUD operations, AJAX handlers, and WordPress admin integration                                                                                                            | 2025-06-18   |
| `admin_albums.php`       | `admin/views/albums-main.php`                      | ✅ Converted                                                                        | Album management                                                                                                                                                                                                                       |
| `admin_newalbum.php`     | `admin/views/albums-add.php`                       | ✅ Converted                                                                        | Album creation form                                                                                                                                                                                                                    |
| `admin_editalbum.php`    | `admin/views/albums-edit.php`                      | ✅ Converted                                                                        | Album editing form                                                                                                                                                                                                                     |
| `admin_branches.php`     | `admin/views/branches-main.php`                    | ✅ Converted                                                                        | Branch management                                                                                                                                                                                                                      |
| `admin_newbranch.php`    | `admin/views/branches-main.php` (tab)              | ✅ Converted                                                                        | Branch creation form                                                                                                                                                                                                                   |
| `admin_editbranch.php`   | `admin/views/branches-edit.php`                    | ✅ Converted                                                                        | Branch editing form                                                                                                                                                                                                                    |
| `admin_addbranch.php`    | `admin/controllers/class-hp-branch-controller.php` | ✅ Converted                                                                        | Branch add handler                                                                                                                                                                                                                     |
| `admin_updatebranch.php` | `admin/controllers/class-hp-branch-controller.php` | ✅ Converted                                                                        | Branch update handler                                                                                                                                                                                                                  |
| `admin_branchmenu.php`   | `admin/views/branches-main.php` (Label tab)        | ✅ **COMPLETE - ENHANCED**                                                          | Branch labeling interface - FULLY implemented with all TNG features plus enhancements: generation controls, progress tracking, person finder, show people functionality, and comprehensive UI                                          | 2025-06-18   |
| `admin_branchlabels.php` | `admin/controllers/class-hp-branch-controller.php` | ✅ **COMPLETE - ENHANCED**                                                          | Branch labeling backend logic - FULLY implemented with all TNG functionality: ancestor/descendant traversal, generation limits, descendants of ancestors, spouse inclusion, comprehensive labeling operations                          | 2025-06-18   |
| `admin_showbranch.php`   | Integrated into branches-main.php search + popup   | ✅ **COMPLETE - ENHANCED**                                                          | Branch people display - FULLY implemented with enhanced search interface plus popup window functionality for viewing branch people                                                                                                     | 2025-06-18   |
| admin_changetree.php     | ✅                                                 | class-hp-entity-transfer-controller.php, entity-transfer-modal.php                  | Complete entity transfer system for moving people/sources/repositories between trees with ID changes, all associated data migration, modern WordPress UI                                                                               | 2025-06-18   |
| admin_changetreeform.php | ✅                                                 | admin/views/entity-transfer-modal.php                                               | Complete entity transfer form interface with tree selection, ID generation, ID checking, move/copy operations, modern WordPress modal UI - all TNG functionality replicated                                                            | 2025-06-18   |
| admin_checkID.php        | ✅                                                 | class-hp-id-checker-controller.php, class-hp-id-checker-endpoint.php, id-checker.js | Universal ID validation system for all entities (person, family, source, repository) with prefix/suffix pattern validation, standalone endpoint, and JavaScript utilities - fully replicates TNG functionality with WordPress security | 2025-06-18   |

| TNG Table          | HeritagePress Table  | Status      | Notes                    |
| ------------------ | -------------------- | ----------- | ------------------------ |
| `tng_people`       | `wp_hp_people`       | ✅ Complete | Core person data         |
| `tng_families`     | `wp_hp_families`     | ✅ Complete | Family relationships     |
| `tng_children`     | `wp_hp_children`     | ✅ Complete | Parent-child links       |
| `tng_events`       | `wp_hp_events`       | ✅ Complete | Life events              |
| `tng_eventtypes`   | `wp_hp_eventtypes`   | ✅ Complete | Event type definitions   |
| `tng_places`       | `wp_hp_places`       | ✅ Complete | Geographic locations     |
| `tng_sources`      | `wp_hp_sources`      | ✅ Complete | Source citations         |
| `tng_repositories` | `wp_hp_repositories` | ✅ Complete | Repository information   |
| `tng_media`        | `wp_hp_media`        | ✅ Complete | Media objects            |
| `tng_medialinks`   | `wp_hp_medialinks`   | ✅ Complete | Media associations       |
| `tng_notes`        | `wp_hp_xnotes`       | ✅ Complete | Note records             |
| `tng_notelinks`    | `wp_hp_notelinks`    | ✅ Complete | Note associations        |
| `tng_trees`        | `wp_hp_trees`        | ✅ Complete | Family tree definitions  |
| `tng_branches`     | `wp_hp_branches`     | ✅ Complete | Tree branch organization |
| `tng_cemeteries`   | `wp_hp_cemeteries`   | ✅ Complete | Cemetery records         |
| `tng_xnotes`       | `wp_hp_xnotes`       | ✅ Complete | Extended notes           |
| `tng_albums`       | `wp_hp_albums`       | ✅ Complete | Media albums             |
| `tng_albumlinks`   | `wp_hp_albumlinks`   | ✅ Complete | Album media links        |
